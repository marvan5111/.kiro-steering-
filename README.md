# .kiro-steering-
Dynamic Supply Chain Resilience Bot   A self-healing logistics system that detects disruptions and reroutes shipments in real time. It uses AI reasoning, UI automation for legacy portals, and blockchain audit trails to deliver reliable, automated, and transparent supply chain operations.

## Architecture Diagram

```
[External Signals: Weather API, Strike News]
          |
          v
[Ingestion Layer] --> [Reasoning Engine] --> [Proposals]
          |                    |
          v                    v
[Audit Ledger]       [Notifications (Slack)]
          ^
          |
[Interactive Callbacks] --> [Approval/Rejection]
```

## How to Run the Bot Locally

1. Install dependencies: `pip install flask requests` (or from requirements.md).
2. Configure environment variables (see Configuration below).
3. Run the reasoning engine: `python src/reasoning/engine.py`
4. To handle Slack callbacks: `python -c "from src.notifications.notifications import NotificationManager; n = NotificationManager(); n.start_server(port=3000)"`

## Configuration

- `SLACK_WEBHOOK_URL`: Set this environment variable to your Slack webhook URL (obtained from Slack App > Incoming Webhooks). Example: `export SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/SERVICE/ID"`

## Example Outputs

### Risk Evaluation
```
INFO: High weather risk detected
INFO: High strike risk detected
INFO: Overall risk score: 1.0
```

### Rerouting Proposals
```
INFO: Generated 3 rerouting proposals
Proposals:
- Alternative Route B: Cost 1.2, Time 0.95, Compliance 1.0, Score 1.06
- Alternative Route A: Cost 1.1, Time 1.05, Compliance 0.9, Score 1.08
- Alternative Route C: Cost 0.9, Time 1.2, Compliance 0.8, Score 1.09
```

### Slack Notification Screenshot
When `SLACK_WEBHOOK_URL` is set, proposals are posted to Slack with interactive buttons for approval/rejection. Example message:

"Rerouting Proposal for Shipment 12345

Disruption detected. Please review and approve the best rerouting option.

• Alternative Route B: Cost 1.20, Time 0.95, Compliance 1.00, Score 1.06
• Alternative Route A: Cost 1.10, Time 1.05, Compliance 0.90, Score 1.08
• Alternative Route C: Cost 0.90, Time 1.20, Compliance 0.80, Score 1.09

[Approve Alternative Route B] [Reject]"

Approvals/rejections are handled via callbacks and logged in the audit ledger.

![Slack Notification Example](slack_example.png)

## Optional: Dashboard UI

To visualize shipments and audit logs, build a dashboard UI using React and AWS Amplify.

- **Frontend**: React application for displaying shipment data and audit logs.
- **Hosting**: AWS Amplify for deployment.
- **Data Integration**: Connect to the audit ledger and shipment feeds for real-time visualization.
- **Features**: Filters for auditors, interactive charts for risk scores and rerouting history.

## Nova Integration

The system integrates Amazon Nova (via AWS Bedrock) for advanced AI capabilities:

- **Predictive Risk Scoring**: Nova analyzes external signals (weather, strikes) to provide accurate risk scores and explanations.
- **Natural Language Summaries**: Slack notifications include human-friendly summaries generated by Nova.
- **Compliance-Ready Audit Reports**: Audit logs include Nova-generated summaries for regulatory compliance.

### Example Outputs

#### Risk Forecast
```
Nova Risk Score: 0.85
Explanation: High risk due to severe weather alerts and active strike disruptions in the shipment route.
```

#### Slack Notification Summary
"Rerouting Proposal for Shipment 12345

High risk detected from weather and strike data. Route B is recommended as it minimizes cost impact while avoiding disruptions. Compliance remains high.

[Approve Route B] [Reject]"

#### Audit Compliance Summary
"Shipment 12345 rerouted to Route B on approval from Ops Manager. Decision based on high risk from weather and strikes, ensuring compliance and minimal cost increase. Logged immutably for audit purposes."

## Demo Script

Follow this step-by-step flow to demonstrate the full pipeline:

1. **Ingestion Detects Disruption**: Simulate external signals (e.g., weather API returns high severity alert, strike API reports active disruption).
   - Expected Output: `INFO: High weather risk detected. INFO: High strike risk detected.`

2. **Nova Predicts Risk and Explains**: Reasoning engine calls Nova with shipment data and signals.
   - Expected Output: `Nova Risk Score: 0.9, Explanation: Severe weather and strikes pose significant risk to on-time delivery.`

3. **Reasoning Engine Generates Proposals**: Evaluates alternative routes balancing cost, time, compliance.
   - Expected Output: `Generated 3 rerouting proposals. Proposals: - Alternative Route B: Cost 1.2, Time 0.95, Compliance 1.0, Score 1.06`

4. **Audit Logs Record Decisions**: Proposals logged with Nova compliance summaries.
   - Expected Output: Audit ledger entry with hash, including compliance summary: "Approved rerouting to Route B due to high risk, maintaining compliance."

5. **Slack Receives Nova-Powered Summaries**: Interactive message with human-friendly text and approval buttons.
   - Expected Output: Slack message as above, with buttons for approval/rejection. Approvals trigger callbacks and further logging.

### Nova Script Demo

To showcase Nova's direct integration:

1. **Show Prompt in VS Code**: Open `nova_script.py` and highlight the prompt variable (e.g., "Explain the importance of AI in supply chain management.").

2. **Run nova_script.py**: Execute `python nova_script.py` in the terminal.
   - Expected Output: Nova's response printed in the terminal, e.g., "AI enhances supply chain efficiency by predicting disruptions and optimizing routes."

3. **Show Nova’s Response in Terminal**: The response appears live in the terminal.

4. **Open audit_ledger.json**: Navigate to `audit_ledger.json` in the project root.
   - Highlight the new entry: Shows logged decision with metadata including modelId ("amazon.nova-pro"), region (e.g., "us-east-1"), stopReason, usage, and compliance summary.

5. **Frame it as**: “Every AI decision is logged for compliance and traceability. The ledger includes full metadata from the Nova call, ensuring transparency and auditability.”
